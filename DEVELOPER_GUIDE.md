# دليل المطور - Smart Gaming Assistant

## نظرة عامة على البنية التقنية

هذا التطبيق يستخدم تقنيات متقدمة للذكاء الاصطناعي ومعالجة الصور لتحليل الألعاب في الوقت الفعلي.

## المكونات الأساسية

### 1. MainActivity (الواجهة الرئيسية)
- **المسؤولية**: إدارة واجهة المستخدم والتحكم في الخدمات
- **الميزات**:
  - طلب الصلاحيات المطلوبة
  - بدء وإيقاف خدمات التحليل
  - عرض حالة الخدمة والاقتراحات
  - واجهة عربية بتصميم Material Design

### 2. ScreenCaptureService (خدمة التقاط الشاشة)
- **المسؤولية**: التقاط محتوى الشاشة باستمرار
- **التقنيات**:
  - MediaProjection API للوصول للشاشة
  - VirtualDisplay لإنشاء مرآة للشاشة
  - ImageReader لمعالجة الصور
  - تشغيل في الخلفية كـ Foreground Service

### 3. GameAnalysisService (خدمة تحليل الألعاب)
- **المسؤولية**: تحليل الصور وتوليد الاقتراحات
- **الوظائف**:
  - استقبال الصور من خدمة التقاط الشاشة
  - تشغيل نماذج الذكاء الاصطناعي
  - إرسال النتائج للواجهة الرئيسية

### 4. TensorFlowManager (مدير TensorFlow)
- **المسؤولية**: تشغيل نماذج التعلم الآلي
- **الميزات**:
  - تشغيل نماذج .tflite محلياً
  - اكتشاف البطاقات في الألعاب
  - تصنيف الألعاب المختلفة
  - استخدام GPU للأداء المحسّن

### 5. OpenCVManager (مدير OpenCV)
- **المسؤولية**: معالجة الصور والرؤية الحاسوبية
- **الوظائف**:
  - تحليل الألوان والمناطق
  - اكتشاف العناصر والنصوص
  - معالجة الصور وتحسينها

### 6. ClashRoyaleAnalyzer (محلل كلاش رويال)
- **المسؤولية**: التحليل المتخصص للعبة كلاش رويال
- **الميزات**:
  - تحليل حالة المعركة
  - اكتشاف البطاقات والوحدات
  - توليد اقتراحات استراتيجية
  - تتبع الإكسير والوقت

## تدفق البيانات

```
الشاشة → ScreenCaptureService → GameAnalysisService → AI Analysis → اقتراحات → MainActivity
```

## نماذج الذكاء الاصطناعي

### Card Detection Model
- **الغرض**: اكتشاف بطاقات اللعبة في الشاشة
- **المدخل**: صورة 224x224 بكسل
- **المخرج**: مواقع وأنواع البطاقات المكتشفة

### Game Classification Model
- **الغرض**: تحديد اللعبة الحالية
- **المدخل**: صورة كاملة للشاشة
- **المخرج**: نوع اللعبة ودرجة الثقة

## الصلاحيات المطلوبة

1. **SYSTEM_ALERT_WINDOW**: عرض التطبيق فوق الألعاب
2. **FOREGROUND_SERVICE**: تشغيل الخدمات في الخلفية
3. **BIND_ACCESSIBILITY_SERVICE**: الوصول لمحتوى التطبيقات
4. **MediaProjection Permission**: التقاط الشاشة

## خطوات التشغيل

1. **منح الصلاحيات**:
   ```
   الإعدادات → التطبيقات → مساعد الألعاب الذكي → الصلاحيات
   ```

2. **تفعيل خدمة الوصول**:
   ```
   الإعدادات → الوصول → مساعد الألعاب الذكي → تفعيل
   ```

3. **السماح بالعرض فوق التطبيقات**:
   ```
   الإعدادات → تطبيقات خاصة → العرض فوق التطبيقات → السماح
   ```

4. **بدء التشغيل**:
   - افتح التطبيق
   - اضغط "بدء الخدمة"
   - امنح صلاحية التقاط الشاشة
   - افتح اللعبة المدعومة

## التطوير والتحسين

### إضافة دعم لألعاب جديدة:

1. **إنشاء محلل جديد**:
   ```java
   public class NewGameAnalyzer {
       // تحليل مخصص للعبة الجديدة
   }
   ```

2. **تسجيل اللعبة في GameAnalysisService**:
   ```java
   if (detectedGame.equals("New Game")) {
       analyzeNewGame();
   }
   ```

3. **إضافة package name في الـ Manifest**:
   ```xml
   android:packageNames="com.newgame.package"
   ```

### تدريب نماذج جديدة:

1. جمع الصور من الألعاب
2. تصنيف البيانات يدوياً
3. تدريب النموذج باستخدام TensorFlow
4. تحويل إلى .tflite للاستخدام المحلي

## الأمان والخصوصية

- جميع المعالجات تتم محلياً على الجهاز
- لا يتم إرسال أي بيانات للإنترنت
- الصور يتم معالجتها في الذاكرة فقط
- لا يتم حفظ لقطات الشاشة

## استهلاك الموارد

- **المعالج**: 10-15% في الاستخدام العادي
- **الذاكرة**: 150-200 MB
- **البطارية**: تحسينات للاستهلاك الأمثل
- **الشبكة**: لا يحتاج اتصال إنترنت

## المشاكل المحتملة والحلول

### التطبيق لا يكتشف اللعبة:
- تأكد من تفعيل خدمة الوصول
- أعد تشغيل التطبيق
- تحقق من الصلاحيات

### الاقتراحات غير دقيقة:
- النماذج في مرحلة تطوير (demo mode)
- يحتاج تدريب على بيانات حقيقية
- يمكن تحسينه بالاستخدام والتطوير

### استهلاك عالي للبطارية:
- قلل من معدل التحليل
- استخدم وضع الطاقة المنخفضة
- أوقف الخدمة عند عدم اللعب

## الخطوات القادمة للتطوير

1. **إضافة ألعاب جديدة** (Clash of Clans, Brawl Stars)
2. **تحسين نماذج الذكاء الاصطناعي** بالتدريب على بيانات حقيقية
3. **إضافة إعدادات متقدمة** للتحكم في السلوك
4. **تطوير واجهة عائمة** للاقتراحات أثناء اللعب
5. **إضافة نظام إحصائيات** لتتبع الأداء