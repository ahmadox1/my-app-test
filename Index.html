<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الشخصية - 10 أسئلة</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .question-card {
            transition: all 0.3s ease;
        }
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn:hover {
            transform: scale(1.03);
        }
        .option-btn.selected {
            transform: scale(1.05);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-indigo-800 mb-3">اختبار الشخصية</h1>
            <p class="text-lg text-gray-600">اكتشف جوانب شخصيتك من خلال 10 أسئلة دقيقة</p>
            <div class="w-full bg-gray-200 rounded-full h-4 mt-6">
                <div id="progress" class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progress-text" class="text-sm text-gray-500 mt-2">0/10 مكتمل</p>
        </header>

        <div id="test-container" class="max-w-2xl mx-auto">
            <div id="intro-screen" class="bg-white rounded-xl shadow-lg p-8 text-center">
                <div class="text-6xl text-indigo-500 mb-6">
                    <i class="fas fa-brain"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">مرحباً بك في اختبار الشخصية</h2>
                <p class="text-gray-600 mb-6">هذا الاختبار يتكون من 10 أسئلة تم توليدها باستخدام الذكاء الاصطناعي لتقييم مختلف جوانب شخصيتك. الإجابات ستساعدك على فهم نفسك بشكل أفضل.</p>
                <div class="flex flex-col space-y-3">
                    <button id="start-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105">
                        بدء الاختبار <i class="fas fa-play ml-2"></i>
                    </button>
                    <p class="text-sm text-gray-500"><i class="fas fa-clock mr-1"></i> الوقت المتوقع: 3-5 دقائق</p>
                </div>
            </div>

            <div id="questions-container" class="hidden">
                </div>

            <div id="results-screen" class="hidden bg-white rounded-xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <div class="text-6xl text-green-500 mb-4">
                        <i class="fas fa-award"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">تم الانتهاء من الاختبار!</h2>
                    <p class="text-gray-600">شكراً لإجابتك على جميع الأسئلة. إليك تحليل شخصيتك:</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-blue-50 p-5 rounded-lg border border-blue-100">
                        <h3 class="font-bold text-blue-800 mb-2 flex items-center">
                            <i class="fas fa-lightbulb mr-2"></i> الجوانب الإيجابية
                        </h3>
                        <ul class="list-disc list-inside text-blue-700 space-y-1" id="positive-traits">
                            </ul>
                    </div>
                    <div class="bg-purple-50 p-5 rounded-lg border border-purple-100">
                        <h3 class="font-bold text-purple-800 mb-2 flex items-center">
                            <i class="fas fa-exclamation-triangle mr-2"></i> الجوانب التي يمكن تطويرها
                        </h3>
                        <ul class="list-disc list-inside text-purple-700 space-y-1" id="improvement-traits">
                            </ul>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-5 rounded-lg text-white">
                    <h3 class="font-bold text-xl mb-3 flex items-center">
                        <i class="fas fa-chart-pie mr-2"></i> تحليل شخصيتك
                    </h3>
                    <p id="personality-analysis" class="mb-4">
                        </p>
                    <div class="flex justify-center space-x-4 mt-6">
                        <button id="restart-btn" class="bg-white text-indigo-600 hover:bg-gray-100 font-medium py-2 px-6 rounded-lg transition duration-300">
                            إعادة الاختبار <i class="fas fa-redo ml-2"></i>
                        </button>
                        <button id="share-btn" class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-6 rounded-lg transition duration-300">
                            مشاركة النتيجة <i class="fab fa-whatsapp ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // الأسئلة المولدة بالذكاء الاصطناعي (محاكاة)
        const questions = [
            { question: "عند مواجهة مشكلة جديدة، كيف تتصرف عادةً؟", options: ["أحلل الموقف بعناية وأبحث عن حل منطقي", "أتبع حدسي وأختار ما أشعر أنه صحيح", "أستشير الآخرين قبل اتخاذ أي قرار", "أحاول تجنب المشكلة ما أمكن"], category: "problem_solving" },
            { question: "كيف تصف علاقاتك مع الآخرين؟", options: ["لدي دائرة صغيرة من الأصدقاء المقربين", "أستمتع بالتواصل مع العديد من الأشخاص المختلفين", "أفضل قضاء الوقت بمفردي معظم الوقت", "أحاول إرضاء الجميع وأكون محبوباً"], category: "social" },
            { question: "عندما تكون في موقف اجتماعي جديد، كيف تشعر؟", options: ["متحمس ومليء بالطاقة", "مرتاح ولكن أراقب الموقف أولاً", "متوتر قليلاً ولكن أتكيف مع الوقت", "أشعر بعدم الارتياح وأفضل المغادرة"], category: "social" },
            { question: "كيف تتعامل مع المواعيد النهائية؟", options: ["أنهي المهام مبكراً وأكون مستعداً قبل الموعد", "أعمل بشكل أفضل تحت الضغط وأتركها حتى اللحظة الأخيرة", "أحاول الالتزام بالموعد ولكن أحياناً أتأخر", "أجد صعوبة في إدارة وقتي وغالباً ما أتأخر"], category: "work_style" },
            { question: "ما هو موقفك من التغيير؟", options: ["أرحب به وأرى فيه فرصاً جديدة", "أتقبله إذا كان ضرورياً", "أشعر بعدم الارتياح ولكني أتكيف مع الوقت", "أفضل البقاء على ما أعرفه وأقاوم التغيير"], category: "adaptability" },
            { question: "كيف تتعامل مع النقد؟", options: ["أعتبره فرصة للتحسين والتعلم", "أحلله لأرى إن كان عادلاً ثم أتصرف بناءً عليه", "أشعر بالإهانة ولكن أحاول عدم إظهار ذلك", "أخذ الأمر على محمل شخصي وأشعر بالإحباط"], category: "emotional" },
            { question: "ما هو نهجك في تحقيق الأهداف؟", options: ["أضع خطة مفصلة وأتبعها بدقة", "لدي فكرة عامة وأترك مجالاً للمرونة", "أعمل بجد ولكن أحياناً أفقد التركيز", "أجد صعوبة في تحديد أهداف واضحة"], category: "work_style" },
            { question: "كيف تتصرف عندما تكون تحت ضغط كبير؟", options: ["أبقى هادئاً وأركز على الحلول", "أشعر بالتوتر ولكن أستمر في العمل", "أحتاج إلى استراحة لاستعادة تركيزي", "أشعر بالإرهاق وقد أفقد السيطرة على مشاعري"], category: "emotional" },
            { question: "ما مدى سهولة اتخاذك للقرارات المهمة؟", options: ["سهلة جداً، أعرف ما أريد", "أحتاج إلى بعض الوقت للتفكير ولكن أقرر بنفسي", "أجد صعوبة وأحتاج إلى مشورة الآخرين", "أؤجل القرار ما أمكن وأشعر بالقلق"], category: "decision_making" },
            { question: "كيف تفضل قضاء وقت فراغك؟", options: ["مع الأصدقاء أو العائلة", "بممارسة هوايات إبداعية أو تعلم شيء جديد", "بالاسترخاء والراحة بمفردي", "بمشاهدة التلفاز أو تصفح الإنترنت دون هدف محدد"], category: "personal" }
        ];

        // عناصر الصفحة
        const introScreen = document.getElementById('intro-screen');
        const questionsContainer = document.getElementById('questions-container');
        const resultsScreen = document.getElementById('results-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const shareBtn = document.getElementById('share-btn');
        const progressBar = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        
        // متغيرات الاختبار
        let currentQuestion = 0;
        let answers = [];
        
        // دالة يتم تنفيذها عند تحميل الصفحة للتحقق من وجود نتائج في الرابط
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const resultsParam = urlParams.get('results');
            
            if (resultsParam && resultsParam.length === questions.length) {
                const sharedAnswers = resultsParam.split('').map(Number);
                introScreen.classList.add('hidden');
                questionsContainer.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
                displayResults(sharedAnswers);
                restartBtn.innerHTML = 'ابدأ اختبارك الخاص <i class="fas fa-pen-alt ml-2"></i>';
                restartBtn.onclick = () => { window.location.href = window.location.pathname; };
                shareBtn.classList.add('hidden');
            }
        });

        // بدء الاختبار
        startBtn.addEventListener('click', startTest);
        
        // إعادة الاختبار
        restartBtn.addEventListener('click', startTest);
        
        function startTest() {
            resultsScreen.classList.add('hidden');
            introScreen.classList.add('hidden');
            questionsContainer.classList.remove('hidden');
            currentQuestion = 0;
            answers = [];
            renderQuestion();
            updateProgress();
        }
        
        // عرض السؤال الحالي
        function renderQuestion() {
            const question = questions[currentQuestion];
            let questionHTML = `
                <div class="question-card bg-white rounded-xl shadow-md p-6 mb-6 animate-fade-in">
                    <div class="flex items-center mb-4">
                        <span class="bg-indigo-100 text-indigo-800 font-bold py-1 px-3 rounded-full text-sm">${currentQuestion + 1}/10</span>
                        <h3 class="text-xl font-semibold text-gray-800 mr-3">${question.question}</h3>
                    </div>
                    <div class="space-y-3" id="options-container">
                        ${question.options.map((option, index) => `
                            <button class="option-btn w-full text-left bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-300 rounded-lg py-3 px-4 text-gray-700 hover:text-indigo-700" data-index="${index}" onclick="selectOption(this, ${index})">
                                <i class="far fa-circle mr-2"></i> ${option}
                            </button>`).join('')}
                    </div>
                </div>
                <div class="flex justify-between mt-6">
                    ${currentQuestion > 0 ? `<button onclick="prevQuestion()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-6 rounded-lg"><i class="fas fa-arrow-right mr-2"></i> السابق</button>` : `<div></div>`}
                    <button id="next-btn" onclick="nextQuestion()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-lg ${answers[currentQuestion] === undefined ? 'opacity-50 cursor-not-allowed' : ''}" ${answers[currentQuestion] === undefined ? 'disabled' : ''}>
                        التالي <i class="fas fa-arrow-left ml-2"></i>
                    </button>
                </div>`;
            questionsContainer.innerHTML = questionHTML;
            if (answers[currentQuestion] !== undefined) {
                const selectedBtn = questionsContainer.querySelector(`button[data-index="${answers[currentQuestion]}"]`);
                if(selectedBtn) { selectOption(selectedBtn, answers[currentQuestion]); }
            }
        }
        
        // اختيار إجابة
        window.selectOption = function(button, optionIndex) {
            document.querySelectorAll('.option-btn').forEach(opt => {
                opt.classList.remove('selected', 'bg-indigo-100', 'border-indigo-400', 'text-indigo-700');
                opt.querySelector('i').className = 'far fa-circle mr-2';
            });
            button.classList.add('selected', 'bg-indigo-100', 'border-indigo-400', 'text-indigo-700');
            button.querySelector('i').className = 'fas fa-check-circle mr-2';
            answers[currentQuestion] = optionIndex;
            document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            document.getElementById('next-btn').disabled = false;
        }
        
        // السؤال التالي
        window.nextQuestion = function() {
            if (answers[currentQuestion] === undefined) return;
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                questionsContainer.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
                shareBtn.classList.remove('hidden');
                restartBtn.innerHTML = 'إعادة الاختبار <i class="fas fa-redo ml-2"></i>';
                displayResults(answers);
            }
            updateProgress();
        }
        
        // السؤال السابق
        window.prevQuestion = function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
                updateProgress();
            }
        }
        
        // تحديث شريط التقدم
        function updateProgress() {
            const answeredCount = answers.filter(a => a !== undefined).length;
            const progress = ((answeredCount) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${answeredCount}/10 مكتمل`;
        }
        
        // دالة لعرض النتائج
        function displayResults(answersArray) {
            progressBar.style.width = `100%`;
            progressText.textContent = `10/10 مكتمل`;
            const personalityTraits = analyzePersonality(answersArray);
            document.getElementById('positive-traits').innerHTML = personalityTraits.positive.map(trait => `<li>${trait}</li>`).join('');
            document.getElementById('improvement-traits').innerHTML = personalityTraits.improvement.map(trait => `<li>${trait}</li>`).join('');
            document.getElementById('personality-analysis').textContent = personalityTraits.analysis;
            setupShareButton(answersArray);
        }

        // دالة لإعداد زر المشاركة
        function setupShareButton(answersArray) {
             shareBtn.onclick = () => {
                const resultsString = answersArray.join('');
                const baseUrl = window.location.origin + window.location.pathname;
                const shareUrl = `${baseUrl}?results=${resultsString}`;
                const shareText = `شاهد نتيجة اختبار الشخصية الخاص بي، وجرّب الاختبار بنفسك!\n\n${shareUrl}`;
                if (navigator.share) {
                     navigator.share({ title: 'نتيجة اختبار الشخصية', text: shareText }).catch(console.error);
                 } else {
                     window.open(`https://wa.me/?text=${encodeURIComponent(shareText)}`, '_blank');
                 }
            };
        }
        
        // دالة تحليل الشخصية
        function analyzePersonality(answers) {
            const types = { logical: 0, intuitive: 0, social: 0, reserved: 0, organized: 0, flexible: 0, confident: 0, cautious: 0 };
            if (answers[0] === 0) types.logical++; else if(answers[0] === 1) types.intuitive++; else if(answers[0] === 2) types.cautious++;
            if (answers[1] === 1) types.social++; else if (answers[1] === 0 || answers[1] === 2) types.reserved++;
            if (answers[2] === 0) types.social++; else if (answers[2] === 2 || answers[2] === 3) types.reserved++;
            if (answers[3] === 0) types.organized++; else if(answers[3] === 1) types.flexible++;
            if (answers[4] === 0) types.flexible++; else if(answers[4] === 3) types.organized--;
            if (answers[5] === 0) types.confident++; else if(answers[5] === 3) types.cautious++;
            if (answers[6] === 0) types.organized++; else if(answers[6] === 1) types.flexible++;
            if (answers[7] === 0) types.confident++; else if(answers[7] === 3) types.cautious++;
            if (answers[8] === 0) types.confident++; else if(answers[8] === 2 || answers[8] === 3) types.cautious++;
            if (answers[9] === 0 || answers[9] === 1) types.social++; else if (answers[9] === 2) types.reserved++;
            
            let positive = [], improvement = [], mainTrait = "متوازن ومرن";
            if (types.logical > types.intuitive) positive.push("تعتمد على المنطق في حل المشكلات"); else positive.push("تتمتع بحدس قوي وتثق بمشاعرك");
            if (types.social > types.reserved) positive.push("شخصية اجتماعية تستمد طاقتها من الآخرين"); else positive.push("تستمتع بالهدوء وتقدر وقتك الخاص");
            if (types.organized > types.flexible) { positive.push("منظم وتخطط لأهدافك بعناية"); improvement.push("قد تستفيد من المرونة وتقبل التغييرات المفاجئة"); mainTrait = "تحليلي ومنظم"; } 
            else { positive.push("مرن وقادر على التكيف مع المتغيرات"); improvement.push("يمكنك تطوير مهارات التخطيط المسبق لتحقيق أهداف أكبر"); mainTrait = "إبداعي ومرن"; }
            if (types.confident > types.cautious) { positive.push("واثق من قراراتك وتتعامل مع النقد بإيجابية"); mainTrait = `واثق و${mainTrait.toLowerCase().split(' ')[0]}`; } 
            else { improvement.push("العمل على زيادة الثقة بالنفس عند اتخاذ القرارات الهامة"); mainTrait = `حذر و${mainTrait.toLowerCase().split(' ')[0]}`; }
            if (positive.length < 2) positive.push("تتمتع بنظرة متوازنة للأمور");
            if (improvement.length < 1) improvement.push("استمر في تطوير وتحدي نفسك في مختلف الجوانب");

            return {
                positive: positive,
                improvement: improvement,
                analysis: `بناءً على إجاباتك، يبدو أن شخصيتك تميل إلى أن تكون "${mainTrait}". لديك مجموعة فريدة من الصفات التي تشكل هويتك. تحليلك يظهر أنك ${positive.join('، كما أنك ')}. ومن الجيد العمل على ${improvement.join(' و')} لتحقيق المزيد من التوازن والنمو الشخصي.`
            };
        }
    </script>
    
    <div class="container mx-auto px-4 py-4">
        <div class="max-w-2xl mx-auto bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500 mb-2">الإعلانات</p>
            </div>
    </div>
</body>
</html>
